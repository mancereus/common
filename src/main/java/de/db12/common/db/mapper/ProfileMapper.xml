<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="de.db12.common.db.mapper.ProfileMapper">

	<resultMap id="profileResult" type="Profile">
		<id property="id" column="id" />
		<result property="profilename" column="profilename" />
		<result property="level" column="level" />
	</resultMap>
	

    <sql id="select">
        SELECT
            id,
            profilename,
            level
        FROM
            profile
    </sql>

    <sql id="where">
        WHERE
            id = #{id}
    </sql>
    <select id="getById" parameterType="java.lang.Integer" resultType="Profile">
        <include refid="select"/>
        <include refid="where"/>
    </select>

    <select id="selectAll" resultType="Profile">
        <include refid="select"/>
    </select>

    <insert id="add" parameterType="Profile">
        INSERT INTO
            profile (
            	profilename,
            	level
            )
        VALUES (
            #{profileName},
            #{level}
        )
        <selectKey order="AFTER" resultType="int" keyProperty="id">
            CALL IDENTITY()
        </selectKey>
    </insert>

    <update id="update" parameterType="Profile">
        UPDATE
            profile
        SET
            profilename = #{profileName},
            level = #{level}
        <include refid="where"/>
    </update>

    <delete id="delete" parameterType="java.lang.Integer">
        DELETE FROM
            profile
        <include refid="where"/>
    </delete>

</mapper>
